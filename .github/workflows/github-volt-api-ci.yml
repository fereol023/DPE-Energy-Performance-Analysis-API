name: ghaction-ci-volt-ai-api
run-name: CI${{ github.run_number }}-${{ github.event.repository.name }}-${{ github.workflow }}_${{ github.ref_name }}
on:
  push:
    branches:
        - dev*
        - main
jobs:
    clone-submodules:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout repository
            uses: actions/checkout@v3
            with:
                fetch-depth: 0
                submodules: 'recursive'
    
          - name: Clone etl_engine submodule
            run: |
              git submodule update --init --recursive
              cd etl_engine
              git checkout main
              cd ..
              ls
              cd etl_engine
              ls 
              cd ..

    call-github-python-pytests-workflow:
        # {owner}/{repo}/.github/workflows/{filename}@{ref}
        uses: fereol023/pipelines_templates/.github/workflows/github-python-pytests.yml@main
        with:
            pythonVersion: 3.12
    # call-github-python-linter-workflow:
    #     uses: fereol023/pipelines_templates/.github/workflows/github-python-linter.yml@main
    #     with: 
    #         pythonVersion: 3.12
    #     secrets:
    #         token: ${{ secrets.GITHUB_TOKEN }}